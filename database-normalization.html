<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Step by Step Database Normalization | Hoanh An</title><meta name="generator" content="Jekyll v3.7.4" /><meta property="og:title" content="Step by Step Database Normalization" /><meta name="author" content="Hoanh An" /><meta property="og:locale" content="en_US" /><meta name="description" content="Definitions" /><meta property="og:description" content="Definitions" /><link rel="canonical" href="https://hoanhan101.github.io/database-normalization" /><meta property="og:url" content="https://hoanhan101.github.io/database-normalization" /><meta property="og:site_name" content="Hoanh An" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2020-11-22T00:00:00-05:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="Step by Step Database Normalization" /><meta name="twitter:site" content="@" /><meta name="twitter:creator" content="@Hoanh An" /> <script type="application/ld+json"> {"url":"https://hoanhan101.github.io/database-normalization","mainEntityOfPage":{"@type":"WebPage","@id":"https://hoanhan101.github.io/database-normalization"},"author":{"@type":"Person","name":"Hoanh An"},"headline":"Step by Step Database Normalization","dateModified":"2020-11-22T00:00:00-05:00","datePublished":"2020-11-22T00:00:00-05:00","description":"Definitions","@type":"BlogPosting","@context":"https://schema.org"}</script><link rel="shortcut icon" href="/favicon.png"><link rel="alternate" type="application/atom+xml" title="Hoanh An" href="/atom.xml"><link rel="alternate" title="Hoanh An" type="application/json" href="https://hoanhan101.github.io/feed.json" /><link rel="sitemap" type="application/xml" title="sitemap" href="/sitemap.xml" /><style type="text/css"> body{font-family:-apple-system,BlinkMacSystemFont,'avenir next',avenir,Noto Sans,helvetica,'helvetica neue',sans-serif}h1{font-size:36px}body{font-size:1rem;line-height:1.5;-webkit-font-smoothing:antialiased;text-rendering:optimizeLegibility}a,a:visited{color:inherit}a:hover,a:visited:hover{color:dodgerblue}li{list-style-position:outside;margin-left:18px;margin-bottom:2px}blockquote{background:#f9f9f9;border-left:5px solid black;font-size:100%;margin:2rem 0;padding:1rem}blockquote p{margin:0}blockquote footer{font-size:80%;margin:1rem 0 0 0}dl dt{margin-bottom:0.5rem}dl dd{font-style:italic;margin-bottom:2rem}code,.highlight{overflow:auto}code{word-break:break-all}pre{padding:1em}.date{opacity:0.6}.highlight table td{padding:5px}.highlight table pre{margin:0}.highlight .gh{color:#999999}.highlight .sr{color:#f6aa11}.highlight .go{color:#888888}.highlight .gp{color:#555555}.highlight .gu{color:#aaaaaa}.highlight .nb{color:#f6aa11}.highlight .cm{color:#75715e}.highlight .cp{color:#75715e}.highlight .c1{color:#75715e}.highlight .cs{color:#75715e}.highlight .c,.highlight .ch,.highlight .cd,.highlight .cpf{color:#75715e}.highlight .err{color:#960050}.highlight .gr{color:#960050}.highlight .gt{color:#960050}.highlight .gd{color:#49483e}.highlight .gi{color:#49483e}.highlight .ge{color:#49483e}.highlight .kc{color:#66d9ef}.highlight .kd{color:#66d9ef}.highlight .kr{color:#66d9ef}.highlight .no{color:#66d9ef}.highlight .kt{color:#66d9ef}.highlight .mf{color:#ae81ff}.highlight .mh{color:#ae81ff}.highlight .il{color:#ae81ff}.highlight .mi{color:#ae81ff}.highlight .mo{color:#ae81ff}.highlight .m,.highlight .mb,.highlight .mx{color:#ae81ff}.highlight .sc{color:#ae81ff}.highlight .se{color:#ae81ff}.highlight .ss{color:#ae81ff}.highlight .sd{color:#e6db74}.highlight .s2{color:#e6db74}.highlight .sb{color:#e6db74}.highlight .sh{color:#e6db74}.highlight .si{color:#e6db74}.highlight .sx{color:#e6db74}.highlight .s1{color:#e6db74}.highlight .s,.highlight .sa,.highlight .dl{color:#e6db74}.highlight .na{color:#a6e22e}.highlight .nc{color:#a6e22e}.highlight .nd{color:#a6e22e}.highlight .ne{color:#a6e22e}.highlight .nf,.highlight .fm{color:#a6e22e}.highlight .vc{color:#ffffff;background-color:#272822}.highlight .nn{color:#ffffff;background-color:#272822}.highlight .nl{color:#ffffff;background-color:#272822}.highlight .ni{color:#ffffff;background-color:#272822}.highlight .bp{color:#ffffff;background-color:#272822}.highlight .vg{color:#ffffff;background-color:#272822}.highlight .vi{color:#ffffff;background-color:#272822}.highlight .nv,.highlight .vm{color:#ffffff;background-color:#272822}.highlight .w{color:#ffffff;background-color:#272822}.highlight{color:#ffffff;background-color:#272822}.highlight .n,.highlight .py,.highlight .nx{color:#ffffff;background-color:#272822}.highlight .ow{color:#f92672}.highlight .nt{color:#f92672}.highlight .k,.highlight .kv{color:#f92672}.highlight .kn{color:#f92672}.highlight .kp{color:#f92672}.highlight .o{color:#f92672}hr{margin-top:20px;border:0;border-top:1px solid #eee}html{box-sizing:border-box;margin:0;padding:0}*,*:before,*:after{box-sizing:inherit}body{background-color:#edf2f7;color:#495057}header,main{margin:0 auto;max-width:50rem}main{background:white;border:2px solid #e9ecef;-webkit-box-shadow:0 0.75rem 1.5rem rgba(18,38,63,0.03);box-shadow:0 0.75rem 1.5rem rgba(18,38,63,0.03);padding:2rem 3rem}ul,ol{padding:0;list-style-position:inside}table{border-collapse:collapse;text-align:left;width:100%}table tr{border-bottom:1px solid black}table td{padding:0.5rem}img{width:100%;margin:0.5rem 0}nav ul{list-style:none !important;padding:0;text-align:center}nav ul li{display:inline-block}nav a,nav a:visited{margin:0.5rem;text-decoration:none;font-size:0.875rem;text-transform:uppercase;color:inherit}footer{margin:1rem 0;text-align:center;color:inherit}@media only screen and (max-width: 600px){nav a{margin:0}h1{font-size:26px}}</style>
    <!-- Google Analytics -->
    <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-155884327-1', 'auto');
	ga('send', 'pageview', { 'page': location.pathname + location.search + location.hash});
	ga('set', 'anonymizeIp', false);
    </script>
    <!-- End Google Analytics -->
    </head><body> <span class="over"></span><header role="banner"><nav role="navigation"><ul><li><a href="/" >Home</a></li><li><a href="/filter" >Filter</a></li><li><a href="/search">Search</a></li><li><a href="/about" >About</a></li><li><a href="https://mailchi.mp/579f9d6927dd/hoanhanco">Subscribe</a></li></ul></nav></header><main id="main" role="main"><article role="article"><h1>Step by Step Database Normalization</h1><p>Example of a step by step normalization from 1NF to 3NF.</p><time class="date" datetime="2020-11-22T00:00:00-05:00"> November 22, 2020 &middot; 4 mins read &middot; <a class="post" href="/category/System-design-notes">System design notes</a><hr> </time><h2 id="definitions">Definitions</h2><p>Database normalization is the process of structuring a relational database with a series of Normal Forms (NF) in order to:</p><ul><li>Reduce data redundancy, eliminate useless data.</li><li>Improve data integrity, make sure data is logically stored, ensure its dependencies make sense.</li></ul><h2 id="normal-forms">Normal Forms</h2><p>There are at least 6 NFs, ranging for 1NF to 6NF, and couple of other forms in between. Informally, a relational database is often considered “normalized” if it meets 3NF.</p><h2 id="example-walkthrough">Example walkthrough</h2><p>Assume our initial table look like this:</p><div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>| book_id | title            | author    | author_nationality | format    | price | subject         | pages | publisher | publisher_country |
| ------- | ---------------- | --------- | ------------------ | --------- | ----- | --------------- | ----- | --------- | ----------------- |
| 1       | Understand SQL   | John Doe  | Canada             | E-book    | 10    | SQL, Database   | 200   | Amazon    | US                |
| 2       | Understand SQL   | John Doe  | US                 | Paperback | 30    | SQL, Database   | 200   | Amazon    | US                |
| 3       | Understand NoSQL | John Snow | US                 | Paperback | 35    | NoSQL, Database | 200   | Amazon    | US                |
</code></pre></div></div><h3 id="first-normal-form-1nf">First Normal Form (1NF)</h3><p>To satisfy 1NF, the values in each column of a table must be atomic or must not contain repeating groups of data.</p><p>In our table, <code class="highlighter-rouge">subject</code> contains multiple values which mean it doesn’t comply. To fix it, we can separate them into a single table:</p><div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>| subject_id | subject  |
| ---------- | -------- |
| 1          | SQL      |
| 2          | NoSQL    |
| 3          | Database |

| book_id | subject_id |
| ------- | ---------- |
| 1       | 1          |
| 1       | 3          |
| 2       | 1          |
| 2       | 3          |
| 3       | 2          |
| 3       | 3          |
</code></pre></div></div><h3 id="second-normal-form-2nf">Second Normal Form (2NF)</h3><p>To satisfy 2NF, no field should only be partially dependent on any candidate key in the table.</p><p>In our table, <code class="highlighter-rouge">price</code> depends on <code class="highlighter-rouge">format</code>. To fix it, we can separate them into a single table:</p><div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>| book_id | format     | price |
| ------- | ---------- | ----- |
| 1       | E-book     | 10    |
| 2       | Paperback  | 30    |
| 3       | Paperback  | 35    |
</code></pre></div></div><h3 id="third-normal-form-3nf">Third Normal Form (3NF)</h3><p>To satisfy 3NF, columns should depend only upon the primary key of the table. It means that any column that is not related to the primary should be moved out, and potentially into its own table.</p><p>That said, we can move <code class="highlighter-rouge">author</code>, <code class="highlighter-rouge">author_nationality</code> into a table, <code class="highlighter-rouge">publisher</code> and <code class="highlighter-rouge">publisher_country</code> into a table as well. This results in our final version as follow:</p><div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>| book_id | title            | pages | 
| ------- | ---------------- | ----- |
| 1       | Understand SQL   | 200   |
| 2       | Understand SQL   | 200   |
| 3       | Understand NoSQL | 200   |

| book_id | author_id | 
| ------- | --------- |
| 1       | 1         | 
| 2       | 1         |
| 3       | 2         |

| author_id | name      | nationality |
| --------- | --------- | ----------- |
| 1         | John Doe  | Canada      |
| 2         | John Snow | US          |

| book_id | publisher_id |
| ------- | ------------ |
| 1       | 1            |
| 2       | 1            |
| 3       | 1            |

| publisher_id | name   | country |
| ------------ | ------ | ------- |
| 1            | Amazon | US      |

| book_id | format     | price |
| ------- | ---------- | ----- |
| 1       | E-book     | 10    |
| 2       | Paperback  | 30    |
| 3       | Paperback  | 35    |

| book_id | subject_id |
| ------- | ---------- |
| 1       | 1          |
| 1       | 3          |
| 2       | 1          |
| 2       | 3          |
| 3       | 2          |
| 3       | 3          |

| subject_id | subject  |
| ---------- | -------- |
| 1          | SQL      |
| 2          | NoSQL    |
| 3          | Database |
</code></pre></div></div><h2 id="conclusion">Conclusion</h2><p>Even though normalization is a design goal, it’s not always practical. As we can see from the example above, before normalizing it, it has more readability and usability in a sense that it’s easier for us to view and query all the data with simple commands. After normalizing it, querying the same things requires JOIN queries, which can sometimes result in performance hit. That said, it really depends on our unique use cases to make trade-off among scalability, readability, and performance.</p><hr /><p><strong>References:</strong></p><ul><li><a href="https://www.dreamincode.net/forums/topic/179103-relational-database-design-normalization/">https://www.dreamincode.net/forums/topic/179103-relational-database-design-normalization/</a></li><li><a href="https://en.wikipedia.org/wiki/Database_normalization">https://en.wikipedia.org/wiki/Database_normalization</a></li></ul><hr><div class="related"><h4>Interested in getting updates on my latest insights and projects, feel free to join my <a class="post" href="https://mailchi.mp/579f9d6927dd/hoanhanco">Insights mailing list</a>. Otherwise, checkout similar posts here:</h4><ul><li><a href="/design-data-intensive-apps">Designing Data-Intensive Applications by Martin Kleppmann</a></li><li><a href="/web-architectural-components">Modern Web Architectural Components</a></li><li><a href="/brief-history-scaling-linkedin">A Brief History of Scaling LinkedIn</a></li></ul></div><hr><p> Tagged: <a class="post" href="/tag/architecture">#architecture</a>, <a class="post" href="/tag/database">#database</a>, <a class="post" href="/tag/normalization">#normalization</a></p><br><div id="disqus_thread"></div><script> var disqus_name = "hoanhan101"; (function() { var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true; dsq.src = '//' + disqus_name + '.disqus.com/embed.js'; (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq); })(); </script> <noscript>Please enable JavaScript to view the comments powered by Disqus.</noscript></article></main><footer class="footer" role="contentinfo"> <small> © 2020 <a style="text-decoration: none;" href="/about">Hoanh An</a> | <a style="text-decoration: none;" href="https://www.linkedin.com/in/hoanhan101/">LinkedIn</a> | <a style="text-decoration: none;" href="https://github.com/hoanhan101">GitHub</a> | <a style="text-decoration: none;" href="mailto:hoanhan101@gmail.com">Email</a> </small></footer></body></html>
